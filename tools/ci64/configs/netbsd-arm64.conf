# netbsd-arm64.conf â€” NetBSD ARM64 on Apple Silicon via HVF
# Near-native speed using Apple Hypervisor.framework

DISK_IMAGE="images/netbsd-arm64.img"
SSH_PORT=2225
SSH_USER=ci
SSH_PASS=ci
CMAKE_FLAGS="-DSELF_QUARTZ=OFF"
NPROC_CMD="sysctl -n hw.ncpu"

QEMU_CMD="qemu-system-aarch64 \
    -machine virt -accel hvf -cpu host \
    -m 2G -smp 2 \
    -drive file=$SCRIPT_DIR/$DISK_IMAGE,if=virtio,snapshot=on \
    -bios /opt/homebrew/share/qemu/edk2-aarch64-code.fd \
    -nic user,hostfwd=tcp::${SSH_PORT}-:22 \
    -nographic"

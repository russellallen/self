# freebsd-arm64.conf â€” FreeBSD ARM64 on Apple Silicon via HVF
# Near-native speed using Apple Hypervisor.framework

DISK_IMAGE="images/freebsd-arm64.qcow2"
SSH_PORT=2224
SSH_USER=ci
SSH_PASS=ci
CMAKE_FLAGS="-DSELF_QUARTZ=OFF"
NPROC_CMD="sysctl -n hw.ncpu"

QEMU_CMD="qemu-system-aarch64 \
    -machine virt -accel hvf -cpu host \
    -m 4G -smp 4 \
    -drive file=$SCRIPT_DIR/$DISK_IMAGE,if=virtio,snapshot=on \
    -bios /opt/homebrew/share/qemu/edk2-aarch64-code.fd \
    -nic user,hostfwd=tcp::${SSH_PORT}-:22 \
    -nographic"
